<!DOCTYPE html>

<html>
<head>
  <title>event_emitter.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="REPORT.html">
                REPORT.md
              </a>
            
              
              <a class="source" href="clock.html">
                clock.js
              </a>
            
              
              <a class="source" href="event_emitter.html">
                event_emitter.js
              </a>
            
              
              <a class="source" href="model.html">
                model.js
              </a>
            
              
              <a class="source" href="score_keeper.html">
                score_keeper.js
              </a>
            
              
              <a class="source" href="tetrimino.html">
                tetrimino.js
              </a>
            
              
              <a class="source" href="tetrimino_factory.html">
                tetrimino_factory.js
              </a>
            
              
              <a class="source" href="tetris.html">
                tetris.js
              </a>
            
              
              <a class="source" href="tetris_control.html">
                tetris_control.js
              </a>
            
              
              <a class="source" href="tetris_view.html">
                tetris_view.js
              </a>
            
              
              <a class="source" href="util.html">
                util.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>event_emitter.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <pre><code>Tetris.js - A Tetris clone <span class="hljs-keyword">for</span> HTML5
Copyright (C) <span class="hljs-number">2014</span>  Chris Barrick &lt;cbarrick1@gmail.com&gt;

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version <span class="hljs-number">3</span> of the License, or
(at your option) any later version.

This program is distributed <span class="hljs-keyword">in</span> the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License <span class="hljs-keyword">for</span> more details.

You should have received a copy of the GNU General Public License
along <span class="hljs-keyword">with</span> <span class="hljs-keyword">this</span> program.  If not, see &lt;http:<span class="hljs-comment">//www.gnu.org/licenses/&gt;.</span>
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>

define(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(require, exports, module)</span> {</span>
<span class="hljs-pi">	'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>A simple event emitter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	<span class="hljs-keyword">var</span> EventEmitter = module.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._events = {};
	};


	EventEmitter.prototype = {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="e-on-event-callback-">e.on(event, callback)</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Registers a callback to be called whenever the event is triggered</p>
<h3 id="params">Params</h3>
<ul>
<li><code>event</code> (String): The name of the event for which to listen.</li>
<li><code>callback</code> (Function): The function to be called when the event
is triggered. The context of the function is the EventEmitter
instance.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
		on: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event, callback)</span> {</span>
			<span class="hljs-keyword">var</span> events = <span class="hljs-keyword">this</span>._events;
			<span class="hljs-keyword">if</span> (!events[event]) events[event] = [];
			events[event].push(callback);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="e-off-event-callback-">e.off([event, [callback]])</h2>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Remove event listeners. If no event is given, all event listeners
are removed. If no callback is given, all listeners for the event
are removed. Else the callback given is removed as a listener for
the given event.</p>
<h3 id="params">Params</h3>
<ul>
<li><code>event</code> (String): The event to for which to remove listeners.</li>
<li><code>callback</code> (Function): The listener to be removed.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
		off: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event, callback)</span> {</span>
			<span class="hljs-keyword">var</span> events = <span class="hljs-keyword">this</span>._events;
			<span class="hljs-keyword">if</span> (event) {
				<span class="hljs-keyword">if</span> (callback) {
					<span class="hljs-keyword">var</span> index = events[event].indexOf(callback);
					events[event].splice(index, <span class="hljs-number">1</span>);
				} <span class="hljs-keyword">else</span> {
					events[event] = [];
				}
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>._events = {};
			}
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="e-once-event-callback-">e.once(event, callback)</h2>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Registers a callback to be invoked once on the next instance of an
event.</p>
<h3 id="params">Params</h3>
<ul>
<li><code>event</code> (String): The name of the event to listen for</li>
<li><code>callback</code> (Function): The function to be called when the event
is triggered. The context of the function is the EventEmitter
instance.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
		once: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event, callback)</span> {</span>
			<span class="hljs-keyword">var</span> oneTime = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
				callback.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
				<span class="hljs-keyword">this</span>.off(event, oneTime);
			}.bind(<span class="hljs-keyword">this</span>);
			<span class="hljs-keyword">this</span>.on(event, oneTime);
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="e-trigger-event-">e.trigger(event)</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Triggers all listeners for an event.</p>
<h3 id="params">Params</h3>
<ul>
<li><code>event</code> (String): The event to emitt.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>
		trigger: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event)</span> {</span>
			<span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
			<span class="hljs-keyword">var</span> e = <span class="hljs-keyword">this</span>._events[event];
			<span class="hljs-keyword">if</span> (e) {
				e.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(callback)</span> {</span>
					callback.apply(<span class="hljs-keyword">this</span>, args);
				}.bind(<span class="hljs-keyword">this</span>));
			}
		}

	};

});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
